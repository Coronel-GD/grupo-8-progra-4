{% extends "base.html" %}
{% block title %}Productos • Mercadito{% endblock %}

{% block content %}
<h2>Todos los productos</h2>

<div class="card-grid">
  {% for product in products %}
    <div class="card">
      <h3>{{ product.title }}</h3>
      <p>{{ product.description|truncatewords:20 }}</p>
      <p><strong>${{ product.price }}</strong></p>
      {% if user.is_authenticated %}
        <button class="btn-primary">Comprar / Truequear</button>
      {% else %}
        <a href="{% url 'account_login' %}" class="btn-primary">Inicia sesión para comprar</a>
      {% endif %}
    </div>
  {% empty %}
    <p>No hay productos disponibles.</p>
  {% endfor %}
</div>

  <p>
    {% if product.is_available %}
      <strong>Stock: {{ product.stock }}</strong>
    {% else %}
      <span style="color:red;">No disponible</span>
    {% endif %}
  </p>


{% endblock %}
